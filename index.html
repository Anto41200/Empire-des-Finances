<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Empire Des Finances</title>
<link rel="stylesheet" href="style.css" />
<!-- Chart.js pour l'historique -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<header>Empire Des Finances</header>

<div id="container">
  <!-- Login -->
  <div class="card" id="loginCard">
    <h2>Connexion</h2>
    <input id="emailInput" type="email" placeholder="Email (servira d'ID)" />
    <input id="usernameInput" type="text" placeholder="Nom du joueur (affiché)" />
    <div class="controls">
      <button class="btn" id="loginBtn">Se connecter / Créer compte</button>
      <button class="btn alt" id="googleBtn">Se connecter avec Google</button>
    </div>
    <p class="small">Les données seront sauvegardées dans Firebase Firestore.</p>
  </div>

  <!-- Player info -->
  <div class="card hidden" id="playerCard">
    <div class="player-row">
      <div>
        <p><b>Email :</b> <span id="emailDisplay"></span></p>
        <p><b>Nom :</b> <span id="usernameDisplay"></span></p>
      </div>
      <div class="player-stats">
        <p><b>Capital :</b> <span id="capitalDisplay"></span></p>
        <p><b>Liquidités :</b> <span id="liquiditeDisplay"></span></p>
      </div>
    </div>
    <div class="controls">
      <button class="btn" id="logoutBtn">Se déconnecter</button>
    </div>
  </div>

  <!-- Menu -->
  <div class="card hidden" id="menuCard">
    <h2>Menu</h2>
    <div class="controls">
      <button class="btn" id="accueilBtn">Accueil</button>
      <button class="btn" id="boutiqueBtn">Boutique</button>
      <button class="btn" id="proprietesBtn">Mes Propriétés</button>
      <button class="btn" id="entreprisesBtn">Entreprises (BETA)</button>
      <button class="btn" id="banqueBtn">Banque</button>
      <button class="btn" id="financesBtn">Finances</button>
      <button class="btn" id="optionsBtn">Options</button>
    </div>
  </div>

  <!-- dynamic content -->
  <div id="content" class="card hidden">
    <h2>Bienvenue dans Empire Des Finances</h2>
    <p>Connecte-toi pour démarrer. 1 mois = 4h réelles (1 jour ≈ 8 min)</p>
  </div>
</div>

<!-- Firebase init (modular) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, onAuthStateChanged, signInWithPopup, signOut, setPersistence, browserLocalPersistence, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

  // === remplace par ta config si besoin ===
  const firebaseConfig = {
    apiKey: "AIzaSyBAuJkFTlYHoKyZiHiAAi-VxcNpZ-FAA9k",
    authDomain: "empire-des-finances.firebaseapp.com",
    projectId: "empire-des-finances",
    storageBucket: "empire-des-finances.appspot.com",
    messagingSenderId: "276513960656",
    appId: "1:276513960656:web:b4440b88b797a4a6fa64d5"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // expose to main script
  window.__FIREBASE = { auth, db, GoogleAuthProvider, onAuthStateChanged, signInWithPopup, signOut, setPersistence, browserLocalPersistence, signInWithEmailAndPassword, createUserWithEmailAndPassword };
</script>

<!-- main script -->
<script type="module" src="script.js"></script>
</body>
</html>
