<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Empire des Finances</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1>Empire des Finances</h1>
</header>

<div id="container">
  <!-- Login -->

  <button class="btn" id="openLoginBtn">Se connecter / Créer un compte</button>

<div id="loginCard" class="card hidden">
    <h2>Connexion</h2>
    <input type="text" id="loginUsername" placeholder="Nom d’utilisateur">
    <input type="password" id="loginPassword" placeholder="Mot de passe">
    <button class="btn" id="loginBtn">Se connecter</button>
    <button class="btn alt" id="closeLoginBtn">Fermer</button>
      <p class="small">Les données seront sauvegardées dans Firebase Firestore.</p>
</div>



  <!-- Player info -->
  <div class="card hidden" id="playerCard">
    <h2>Informations du Joueur</h2>
    <p><b>Email :</b> <span id="emailDisplay"></span></p>
    <p><b>Nom :</b> <span id="usernameDisplay"></span></p>
    <p><b>Patrimoine :</b> <span id="capitalDisplay"></span> €</p>
    <p><b>Liquidités :</b> <span id="liquiditeDisplay"></span> €</p>
    <p><b>Propriétés :</b> <span id="nbBiensDisplay"></span></p>
    <p><b>Entreprises :</b> <span id="nbEntreprisesDisplay"></span></p>
    <div class="controls">
      <button class="btn alt" onclick="logout()">Se déconnecter</button>
    </div>
  </div>

  <!-- Menu -->
  <div class="card hidden" id="menuCard">
    <h2>Menu</h2>
    <div class="controls">
      <button class="btn" onclick="showAccueil()">Accueil</button>
      <button class="btn" onclick="showProprietes()">Propriétés</button>
      <button class="btn" onclick="showEntreprises()">Entreprises</button>
      <button class="btn" onclick="showBanque()">Banque</button>
      <button class="btn" onclick="showFinances()">Finances</button>
      <button class="btn" onclick="showDemocratie()">Démocratie</button>
      <button class="btn" onclick="showChat()">Chat</button>
      <button class="btn" onclick="showOptions()">Options</button>
    </div>
  </div>

  <!-- Dynamic content -->
  <div id="content" class="card hidden">
    <h2>Bienvenue dans Empire des Finances</h2>
    <p>Connecte-toi pour démarrer. 1 mois = 4h réelles (1 jour ≈ 8 minutes)</p>
  </div>
</div>

<!-- Firebase init -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBAuJkFTlYHoKyZiHiAAi-VxcNpZ-FAA9k",
  authDomain: "empire-des-finances.firebaseapp.com",
  projectId: "empire-des-finances",
  storageBucket: "empire-des-finances.appspot.com",
  messagingSenderId: "276513960656",
  appId: "1:276513960656:web:b4440b88b797a4a6fa64d5"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);
window.db = db;
window.auth = auth;

// Google login
window.googleLogin = async function() {
  const provider = new GoogleAuthProvider();
  try {
    const result = await signInWithPopup(auth, provider);
    const user = result.user;
    document.getElementById("emailInput").value = user.email;
    document.getElementById("usernameInput").value = user.displayName || user.email.split("@")[0];
    document.getElementById("loginBtn").click();
  } catch(e) { console.error(e); alert("Erreur connexion Google"); }
}

document.getElementById("googleLoginBtn").addEventListener("click", window.googleLogin);
</script>

<!-- Main script -->
<script type="module" src="script.js" defer></script>
<button class="btn" id="openLoginBtn">Se connecter / Créer un compte</button>


</body>
</html>
